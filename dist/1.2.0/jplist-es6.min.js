!function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);class i{static sort(t,e){return!e||e.length<=0?(t.sort((t,e)=>i.sortByIndex(t,e)),t):(t.sort((t,s)=>i.sortHelper(t,s,e,0)),t)}static sortHelper(t,e,s,r){if(!s||s.length<=0||r>=s.length)return 0;let n=0;const a=s[r];if("default"!==a.path)switch(a.dataType){case"number":n=i.sortNumbers(t,e,a.path,a.order);break;case"datetime":n=i.sortDateTime(t,e,a.path,a.order,a.dateTimeFormat);break;default:n=i.sortText(t,e,a.path,a.order,a.ignoreRegex)}else n=i.sortByIndex(t,e);return 0===n&&r+1<s.length&&(n=i.sortHelper(t,e,s,r+1)),n}static sortText(t,e,s="",i="asc",r=""){if(!t||!e)return 0;const n=s?t.querySelector(s):t,a=s?e.querySelector(s):e;if(!n||!a)return 0;let o=n.textContent.trim().toLowerCase(),l=a.textContent.trim().toLowerCase();if(r){const t=new RegExp(r,"ig");o=o.replace(t,"").trim(),l=l.replace(t,"").trim()}return o===l?0:(i||(i="asc"),"".localeCompare?"asc"===i?o.localeCompare(l):l.localeCompare(o):"asc"===i?o>l?1:-1:o<l?1:-1)}static sortNumbers(t,e,s="",i="asc"){if(!t||!e)return 0;const r=s?t.querySelector(s):t,n=s?e.querySelector(s):e;if(!r||!n)return 0;let a=r.textContent.trim().toLowerCase(),o=n.textContent.trim().toLowerCase();return a=parseFloat(a.replace(/[^-0-9.]+/g,"")),o=parseFloat(o.replace(/[^-0-9.]+/g,"")),isNaN(a)||isNaN(o)?isNaN(a)&&isNaN(o)?0:isNaN(a)?1:-1:a===o?0:(i||(i="asc"),"asc"===i?a-o:o-a)}static sortByIndex(t,e){if(!t||!e)return 0;let s=Number(t.jplistIndex),i=Number(e.jplistIndex);return isNaN(s)||isNaN(i)?0:s-i}static get months(){return[["january","jan","jan."],["february","feb","feb."],["march","mar","mar."],["april","apr","apr."],["may"],["june","jun."],["july","jul","jul."],["august","aug","aug."],["september","sep","sep."],["october","oct","oct."],["november","nov","nov."],["december","dec","dec."]]}static sortDateTime(t,e,s="",r="asc",n=""){if(!t||!e)return 0;const a=s?t.querySelector(s):t,o=s?e.querySelector(s):e;if(!a||!o)return 0;let l,d,c=a.textContent.trim().toLowerCase(),h=o.textContent.trim().toLowerCase();return(n=n.trim())?(l=i.getDateFromString(c,n),d=i.getDateFromString(h,n)):(l=new Date(Date.parse(c)),d=new Date(Date.parse(h))),l.getTime()===d.getTime()?0:(r||(r="asc"),"asc"===r?l.getTime()>d.getTime()?1:-1:l.getTime()<d.getTime()?1:-1)}static getDateFromString(t,e){e=(e=(e=(e=(e=e.replace(/\./g,"\\.")).replace(/\(/g,"\\(")).replace(/\)/g,"\\)")).replace(/\[/g,"\\[")).replace(/\]/g,"\\]");let s=i.getDateWildcardValue(e,"{year}",t);s=Number(s)||1900;let r=i.getDateWildcardValue(e,"{day}",t);r=Number(r)||1;let n=i.getDateWildcardValue(e,"{month}",t);n=i.getMonthByWildcard(n),-1===n&&(n=0);let a=i.getDateWildcardValue(e,"{hour}",t);a=Number(a)||0;let o=i.getDateWildcardValue(e,"{min}",t);o=Number(o)||0;let l=i.getDateWildcardValue(e,"{sec}",t);return l=Number(l)||0,new Date(s,n,r,a,o,l)}static getDateWildcardValue(t,e,s){let i=null;const r=t.replace(e,"(.*)").replace(/{year}|{month}|{day}|{hour}|{min}|{sec}/g,".*"),n=new RegExp(r,"g").exec(s);return n&&n.length>1&&(i=n[1]),i}static getMonthByWildcard(t){t=t?t.trim().toLowerCase():"";let e=Number(t);return isNaN(e)?i.months.findIndex(e=>e.find(e=>e.trim()===t)):e-1<0?-1:e-1}}var r=i;var n=class{constructor(t,e,s,i){this.itemsNumber=Number(s)||0,this.itemsPerPage=Number.isInteger(e)?Number(e):this.itemsNumber,0===this.itemsPerPage&&(this.itemsPerPage=s),this.pagesNumber=0===this.itemsPerPage?0:Math.ceil(this.itemsNumber/this.itemsPerPage),this.currentPage=Number(t)||0,this.currentPage>this.pagesNumber-1&&(this.currentPage=0),this.start=this.currentPage*this.itemsPerPage,this.end=this.start+this.itemsPerPage,this.end>this.itemsNumber&&(this.end=this.itemsNumber),this.prevPage=this.currentPage<=0?0:this.currentPage-1,this.nextPage=0===this.pagesNumber?0:this.currentPage>=this.pagesNumber-1?this.pagesNumber-1:this.currentPage+1,this.range=Number(i)||10;const r=Math.ceil((this.range-1)/2);this.rangeStart=this.currentPage-r,this.rangeEnd=Math.min(this.rangeStart+this.range-1,this.pagesNumber-1),this.rangeStart<=0&&(this.rangeStart=0,this.rangeEnd=Math.min(this.range-1,this.pagesNumber-1)),this.rangeEnd>=this.pagesNumber-1&&(this.rangeStart=Math.max(this.pagesNumber-this.range,0),this.rangeEnd=this.pagesNumber-1)}};var a=class{constructor(t){t&&(this.element=t,this.element.initialHTML=t.outerHTML,this.type=(t.getAttribute("data-jplist-control")||"").trim().toLowerCase(),this.group=(t.getAttribute("data-group")||"").trim().toLowerCase(),this.name=(t.getAttribute("data-name")||t.getAttribute("name")||"default").trim(),this.id=(t.getAttribute("data-id")||"").trim().toLowerCase(),this.jump=(t.getAttribute("data-jump")||"").trim())}};class o{static getParam(t){if(!t)return null;const e=t.split("=");return e.length<2?null:{key:e[0].trim().toLowerCase(),value:e[1].trim().toLowerCase()}}static getUrlParams(t,e="#"){const s=new Map;if(!t)return s;const i=window.decodeURIComponent(t.replace(e,"")).trim().toLowerCase();if(!i)return s;const r=i.split("&");let n="";for(let t of r){const e=o.getParam(t);if(e)if("group"===e.key)n=e.value,s.has(e.value)||s.set(e.value,[]);else{const t=s.get(n);t&&t.push(e),s.set(n,t)}}return s}}var l=o;class d{static isSupported(t){if("cookies"===t)return!0;try{return t in window&&null!==window[t]}catch(t){return!1}}static set(t,e,s,i=-1){if("cookies"===e){const e=encodeURIComponent(t),s=new Date;-1===(i=Number(i)||-1)?document.cookie=name+"="+e+";path=/;":(s.setMinutes(s.getMinutes()+i),document.cookie=name+"="+e+";path=/; expires="+s.toUTCString())}else d.isSupported(e)&&(window[e][s]=t)}static get(t,e){let s="";if("cookies"===t){const t=document.cookie.split(";");for(let i=0;i<t.length;i++){let r=t[i].substr(0,t[i].indexOf("=")),n=t[i].substr(t[i].indexOf("=")+1);if(r=r.replace(/^\s+|\s+$/g,""),r===e){s=decodeURIComponent(n);break}}}else d.isSupported(t)&&(s=window[t][e]||"");return s}}var c=d;class h{static textFilter(t,e,s="",i="contains",r=""){const n=[];if(!t)return[];if("default"===s)return t;const a=e.replace(new RegExp(r,"ig"),"").toLowerCase().trim();for(let e of t){const t=s?e.querySelectorAll(s):[e];if(!t)continue;let o=!1;for(let e of t){const t=e.textContent.replace(new RegExp(r,"ig"),"").toLowerCase().trim();switch(i){case"startsWith":t.startsWith(a)&&(o=!0);break;case"endsWith":t.endsWith(a)&&(o=!0);break;case"equal":t===a&&(o=!0);break;default:-1!==t.indexOf(a)&&(o=!0)}if(o)break}o&&n.push(e)}return n}static pathFilter(t,e="",s=!1){const i=[];if(!t)return[];if("default"===e||!e)return t;for(let r of t){const t=r.querySelector(e);(t&&!s||!t&&s)&&i.push(r)}return i}static isNumeric(t){return!isNaN(parseFloat(t))&&isFinite(t)}static rangeFilter(t,e="",s,i,r=s,n=i){const a=[];if(!t)return[];if("default"===e)return t;s=Math.max(s,r),i=Math.min(i,n);for(let r of t){const t=e?r.querySelectorAll(e):[r];if(!t)continue;const n=[];for(let e of t){const t=Number(e.textContent.trim().replace(/[^-0-9.]+/g,""));isNaN(t)||n.push(t)}if(n.length>0){const t=Math.max.apply(Math,n),e=Math.min.apply(Math,n);let o=!0;h.isNumeric(s)&&s>e&&(o=!1),h.isNumeric(i)&&t>i&&(o=!1),o&&a.push(r)}}return a}static calculateDistance(t,e,s,i){const r=(s-t)*Math.PI/180,n=(i-e)*Math.PI/180,a=Math.sin(r/2)*Math.sin(r/2)+Math.cos(t*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}static formatDistance(t){return t<1?Math.round(1e3*t)+" m":Math.round(t)+" km"}static distanceFilter(t,e,s,i,r,n,a,o,l){if(!t||!a||!o)return t;const d=[];for(let c of t){const t=e?c.querySelectorAll(e):[c],u=s?c.querySelectorAll(s):[c];if(!t.length||!u.length)continue;const p=parseFloat(t[0].getAttribute(i)),m=parseFloat(u[0].getAttribute(r));if(isNaN(p)||isNaN(m))continue;const g=h.calculateDistance(a,o,p,m);if(!(null!==n&&g>n)){if(c.distance=g,c.formattedDistance=h.formatDistance(g),l){const t=c.querySelectorAll(l);for(let e of t)e.textContent=c.formattedDistance,e.style.display="inline-block"}d.push({item:c,distance:g})}}return d.sort((t,e)=>t.distance-e.distance),d.map(t=>t.item)}}var u=h;class p{static apply(t,e,s,i="",a){if(!e||!s)return;const o=[{options:"pathFilterOptions",name:"pathFilter"},{options:"rangeFilterOptions",name:"rangeFilter"},{options:"textFilterOptions",name:"textFilter"},{options:"distanceFilterOptions",name:"distanceFilter"}];for(let[t,l]of s)if(i&&i===t||!i){const i=e.get(t),d=p.collectControlsOptions(i);for(let t of l){let e=t.items.length,a=p.getItemsFragment(t.items);d.sortOptions&&d.sortOptions.length>0&&(r.sort(t.items,d.sortOptions),a=p.getItemsFragment(t.items));let l=t.items;for(let t of o){const s=t.options;if(d[s]&&d[s].length>0){const i=p.splitByLogic(d[s]);l=p.handleFilter(l,i.and,"and",t.name);for(let e in i.or)l=p.handleFilter(l,i.or[e],"or",t.name);e=l.length,a=p.getItemsFragment(l)}}if(d.paginationOptions){const t=new n(d.paginationOptions.currentPage,d.paginationOptions.itemsPerPage,l.length,d.paginationOptions.range);if(i.length>0)for(let e of i)e.setPaginationOptions&&e.setPaginationOptions(t);const s=l.slice(t.start,t.end);e=s.length,a=p.getItemsFragment(s)}t.root.appendChild(a),p.sendStateEvent(d,e,i,s,l)}p.jump(i,a)}t.deepLinking?p.updateDeepLink(p.getDeepLink(e,s),t.hashStart):t.storage&&c.set(p.getDeepLink(e,s),t.storage,t.storageName,t.cookiesExpiration)}static performFilter(t,e,s){switch(s){case"textFilter":return u.textFilter(e,t.text,t.path,t.mode,t.ignoreRegex);case"pathFilter":return u.pathFilter(e,t.path,t.isInverted);case"rangeFilter":return u.rangeFilter(e,t.path,t.from,t.to,t.min,t.max);case"distanceFilter":return u.distanceFilter(e,t.latPath,t.lngPath,t.latAttr,t.lngAttr,t.maxDistance,t.userLat,t.userLng,t.distanceDisplayPath)}return e}static handleFilter(t,e,s,i){if(e.length<=0)return t;if("and"===s)for(let s of e)t=p.performFilter(s,t,i);if("or"===s){let s=new Set;for(let r of e){let e=p.performFilter(r,t,i);s=new Set([...s,...e])}t=Array.from(s)}return t}static splitByLogic(t){const e={and:[],or:{}};for(let s of t){const t=s.or;t?void 0===e.or[t]?e.or[t]=[s]:e.or[t].push(s):e.and.push(s)}return e}static jump(t,e){if(!e||!e.jump)return;let s=-1;if("top"===e.jump)s=0;else{const t=document.querySelector(e.jump);if(!t)return;const i=t.getBoundingClientRect();if(!t.width&&!t.height&&!t.getClientRects().length)return;const r=document.clientTop||document.body.clientTop||0;(s<0||i.top+window.pageYOffset-r<s)&&(s=i.top+window.pageYOffset-r)}s>=0&&window.scroll(0,s)}static sendStateEvent(t,e,s,i,r){if(!s)return;const n=new CustomEvent("jplist.state");n.jplistState={options:t,itemsNumber:e,groups:i,filtered:r};for(let t of s)for(let e of t.controls)e.element.dispatchEvent(n)}static collectControlsOptions(t){const e={sortOptions:[],paginationOptions:null,textFilterOptions:[],pathFilterOptions:[],rangeFilterOptions:[],distanceFilterOptions:[]};if(!t)return e;for(let s of t)s.getSortOptions&&(e.sortOptions=e.sortOptions.concat(s.getSortOptions())),s.getTextFilterOptions&&(e.textFilterOptions=e.textFilterOptions.concat(s.getTextFilterOptions())),s.getPathFilterOptions&&(e.pathFilterOptions=e.pathFilterOptions.concat(s.getPathFilterOptions())),s.getRangeFilterOptions&&(e.rangeFilterOptions=e.rangeFilterOptions.concat(s.getRangeFilterOptions())),s.getDistanceFilterOptions&&(e.distanceFilterOptions=e.distanceFilterOptions.concat(s.getDistanceFilterOptions())),s.getPaginationOptions&&(e.paginationOptions=s.getPaginationOptions());return e}static getItemsFragment(t){const e=document.createDocumentFragment();for(let s of t)e.appendChild(s);return e}static updateDeepLink(t,e="#"){let s=t.replace(e,"").trim();if(s=""===s?e:e+s,window.location.hash!==s){const t=window.location.href.indexOf(e);let i;i=-1===t?window.location.href+s:window.location.href.substring(0,t)+s,"replaceState"in window.history?window.history.replaceState("","",i):window.location.replace(i)}}static getDeepLink(t,e){let s=[];for(let i of e.keys()){const e=t.get(i),r=[];for(let t of e){const e=t.getDeepLink();e&&r.push(e)}r.length>0&&(s.push("group="+i),s=s.concat(r))}return s.join("&")}static findGroups(t){const e=new Map;if(!t)return e;const s=[...t];for(let t of s){const s=t.getAttribute("data-jplist-group");let i=[];e.has(s)&&(i=e.get(s)),i.push({root:t,items:[...t.querySelectorAll("[data-jplist-item]")],fragment:document.createDocumentFragment()}),e.set(s,i)}return e}static findControls(t){if(!t)return[];const e=[],s=t.querySelectorAll("[data-jplist-control]");if(s)for(let t of s){if(!t.getAttribute("data-jplist-control"))continue;const s=new a(t);e.push(s)}return e}static findControlGroups(t){const e=new Map;if(t)for(let s of t){let t=[];e.has(s.group)&&(t=e.get(s.group)),t.push(s),e.set(s.group,t)}return e}static findSameNameControls(t,e){const s=new Map;if(e){let i=null;if(t.deepLinking)i=l.getUrlParams(window.location.hash,t.hashStart);else if(t.storage){const e=c.get(t.storage,t.storageName);i=l.getUrlParams(e,"")}for(let t of e){if(!t.type||!window.jplist.controlTypes.has(t.type))continue;const e=window.jplist.controlTypes.get(t.type);if(e){let r=null;r=s.has(t.name)?s.get(t.name):new e(t.group,t.name,[],i),r.addControl(t),s.set(t.name,r)}}}return s}static splitByGroupAndName(t,e){const s=new Map;if(!e)return s;const i=p.findControls(e),r=p.findControlGroups(i);for(let[e,i]of r){const r=p.findSameNameControls(t,i);let n=[];for(let t of r.values())n.push(t);s.set(e,n)}return s}}var m=p;class g{init(t){this.settings=Object.assign({},{storage:"",storageName:"jplist",cookiesExpiration:-1,deepLinking:!1,hashStart:"#"},t),this.controls=m.splitByGroupAndName(this.settings,document.body),this.elements=document.querySelectorAll("[data-jplist-group]"),this.groups=m.findGroups(this.elements);let e=[...document.querySelectorAll("[data-jplist-item]")];for(let t=0;t<e.length;t++)e[t].jplistIndex=t;this.refresh("")}refresh(t="",e){m.apply(this.settings,this.controls,this.groups,t,e)}resetControl(t){if(t&&this.controls)for(let[e,s]of this.controls)for(let i of s){let s=i.controls.findIndex(e=>e.element===t);if(s>=0){const t=i.controls[s].element,r=document.createElement("div");r.innerHTML=t.initialHTML;const n=r.firstChild;return void(t.parentNode&&(t.parentNode.replaceChild(n,t),i.controls.splice(s,1),i.addControl(new a(n)),this.refresh(e)))}}}resetControls(t=""){if(this.controls)for(let[t,e]of this.controls)for(let t of e)for(let e of t.controls)e.element&&e.element.initialHTML&&(e.element.outerHTML=e.element.initialHTML);this.controls=m.splitByGroupAndName(this.settings,document.body),this.refresh(t)}resetContent(t){for(let[t,e]of this.groups)for(let t of e){let e=m.getItemsFragment(t.items);t.root.appendChild(e)}t&&t(this.groups),this.elements=document.querySelectorAll("[data-jplist-group]"),this.groups=m.findGroups(this.elements);let e=[...document.querySelectorAll("[data-jplist-item]")];for(let t=0;t<e.length;t++)e[t].jplistIndex=t;this.refresh("")}}var f=class{constructor(t,e,s,i=null){this.group=(t||"").trim().toLowerCase(),this.name=(e||"default").trim(),this.controls=s||[],this.deepLinkParams=[],i&&i.has(this.group)&&(this.deepLinkParams=i.get(this.group)||[])}addControl(t){t&&t.name===this.name&&t.group===this.group&&this.controls.push(t)}getDeepLink(){return""}};var b=class extends a{constructor(t){if(super(t),t){this.path=(t.getAttribute("data-path")||"").trim(),this.dataType=(t.getAttribute("data-type")||"text").trim().toLowerCase(),this.order=(t.getAttribute("data-order")||"asc").trim().toLowerCase(),this.regex=t.getAttribute("data-regex")||"",this.dateTimeFormat=(t.getAttribute("data-date-format")||"").trim().toLowerCase(),this.multipleSortsNumber=this.getMultipleSortsNumber(t);for(let e=1;e<=this.multipleSortsNumber;e++)this["path"+e]=(t.getAttribute("data-path-"+e)||"").trim(),this["dataType"+e]=(t.getAttribute("data-type-"+e)||"text").trim().toLowerCase(),this["order"+e]=(t.getAttribute("data-order-"+e)||"asc").trim().toLowerCase(),this["regex"+e]=t.getAttribute("data-regex-"+e)||"",this["dateTimeFormat"+e]=(t.getAttribute("data-date-format-"+e)||"").trim().toLowerCase()}}getMultipleSortsNumber(t){let e=0;for(let s of t.attributes){let t=null;const i=/^data-path-([0-9]+)$/g;for(;t=i.exec(s.nodeName);){const s=Number(t[1]);Number.isInteger(s)&&e++}}return e}getSortOptions(){const t=[];if(this.path){t.push({path:this.path,dataType:this.dataType,order:this.order,ignoreRegex:this.ignoreRegex,dateTimeFormat:this.dateTimeFormat});for(let e=1;e<=this.multipleSortsNumber;e++)t.push({path:this["path"+e],dataType:this["dataType"+e],order:this["order"+e],ignoreRegex:this["ignoreRegex"+e],dateTimeFormat:this["dateTimeFormat"+e]})}return t}isEqualTo(t){let e=!0;const s=["path","dataType","order","regex","dateTimeFormat"];for(let i=0;i<s.length;i++)e=e&&this[s[i]]===t[s[i]];e=e&&this.multipleSortsNumber===t.multipleSortsNumber;for(let i=1;i<=this.multipleSortsNumber;i++)for(let r=0;r<s.length;r++)e=e&&this[s[r]+i]===t[s[r]+i];return e}};var x=class extends f{getSortOptions(){let t=[];for(let e of this.controls)t=t.concat(e.getSortOptions());return t}addControl(t){if(t.name!==this.name||t.group!==this.group)return null;const e=new b(t.element);return this.controls.push(e),e}};var v=class extends x{};var w=class extends x{constructor(t,e,s=[],i=null){super(t,e,s,i),this.group=t,this.name=e,this.checkboxes=[],this.radios=[]}addControl(t){const e=super.addControl(t);if(e.selected="true"===e.element.getAttribute("data-selected"),e.mode=e.element.getAttribute("data-mode")||"radio",e.id){const t=this.deepLinkParams.find(t=>t.key===e.id);t&&(e.selected="1"===t.value)}"radio"===e.mode&&(this.radios.push(e),this.handleRadios()),"checkbox"===e.mode&&(this.checkboxes.push(e),this.handleCheckboxes()),e.element.addEventListener("click",t=>{if(t.preventDefault(),"checkbox"===e.mode&&(e.selected=!e.selected,this.checkboxes.forEach(t=>{t.isEqualTo(e)&&(t.selected=e.selected)}),this.handleCheckboxes()),"radio"===e.mode){for(let t of this.radios)t.selected=!1;e.selected=!0,this.handleRadios()}window.jplist&&window.jplist.refresh(this.group,e)})}handleCheckboxes(){for(let t of this.checkboxes)t.selected?t.element.classList.add("jplist-selected"):t.element.classList.remove("jplist-selected")}getLastSelectedRadio(){let t=null;for(let e of this.radios)e.selected&&(t=e);return t}handleRadios(){if(this.radios.length>0){let t=this.getLastSelectedRadio();for(let t of this.radios)t.selected=!1,t.element.classList.remove("jplist-selected");t&&this.radios.forEach(e=>{e.isEqualTo(t)&&(e.selected=!0,e.element.checked=!0,e.element.classList.add("jplist-selected"))})}}getSortOptions(){let t=[],e=!1;for(let s of this.checkboxes)s.selected?t=t.concat(s.getSortOptions()):e=!0;e&&(t=t.concat([{path:"default"}]));let s=this.getLastSelectedRadio();return s&&(t=t.concat(s.getSortOptions())),t}getDeepLink(){const t=this.checkboxes.map(t=>t.id&&t.selected?t.id+"=1":"").filter(t=>""!==t),e=this.radios.map(t=>t.id&&t.selected?t.id+"=1":"").filter(t=>""!==t),s=t.concat(e);return Array.from(new Set(s)).join("&")}};var y=class extends x{constructor(t,e,s=[],i=null){super(t,e,s,i),this.group=t,this.name=e,this.radios=[]}addControl(t){const e=super.addControl(t);if(e.selected=e.element.checked,e.id){const t=this.deepLinkParams.find(t=>t.key===e.id);t&&(e.selected="1"===t.value)}this.radios.push(e),this.handleRadios(),e.element.addEventListener("change",t=>{t.preventDefault();for(let t of this.radios)t.selected=!1;e.selected=!0,this.handleRadios(),window.jplist&&window.jplist.refresh(this.group,e)})}getLastSelectedRadio(){let t=null;for(let e of this.radios)e.selected&&(t=e);return t}handleRadios(){if(this.radios.length>0){let t=this.getLastSelectedRadio();for(let t of this.radios)t.selected=!1,t.element.classList.remove("jplist-selected");t&&this.radios.forEach(e=>{e.isEqualTo(t)&&(e.selected=!0,e.element.checked=!0,e.element.classList.add("jplist-selected"))})}}getSortOptions(){let t=[],e=this.getLastSelectedRadio();return e&&(t=t.concat(e.getSortOptions())),t}getDeepLink(){const t=this.radios.map(t=>t.id&&t.selected?t.id+"=1":"").filter(t=>""!==t);return Array.from(new Set(t)).join("&")}};var C=class extends x{constructor(t,e,s=[],i=null){super(t,e,s,i),this.group=t,this.name=e,this.checkboxes=[]}addControl(t){const e=super.addControl(t);if(e.selected=e.element.checked,e.id){const t=this.deepLinkParams.find(t=>t.key===e.id);t&&(e.selected="1"===t.value)}this.checkboxes.push(e),this.handleCheckboxes(),e.element.addEventListener("change",t=>{t.preventDefault(),e.selected=!e.selected,this.checkboxes.forEach(t=>{t.isEqualTo(e)&&(t.selected=e.selected)}),this.handleCheckboxes(),window.jplist&&window.jplist.refresh(this.group,e)})}handleCheckboxes(){for(let t of this.checkboxes)t.selected?t.element.classList.add("jplist-selected"):t.element.classList.remove("jplist-selected"),t.element.checked=t.selected}getSortOptions(){let t=[],e=!1;for(let s of this.checkboxes)s.selected?t=t.concat(s.getSortOptions()):e=!0;return e&&(t=t.concat([{path:"default"}])),t}getDeepLink(){const t=this.checkboxes.map(t=>t.id?t.selected?t.id+"=1":t.id+"=0":"").filter(t=>""!==t);return Array.from(new Set(t)).join("&")}};var P=class extends x{constructor(t,e,s=[],i=null){super(t,e,s,i),this.group=t,this.name=e,this.options=[],this.selected="",this.id=""}addControl(t){const e=super.addControl(t);let s=e.element.querySelectorAll("option");for(let t of s)t.setAttribute("data-name",this.name),t.setAttribute("data-group",this.group),this.options.find(e=>e.element.value===t.value)||this.options.push(new b(t));if(this.selected=e.element.value,e.id){this.id=e.id;const t=this.deepLinkParams.find(t=>t.key===e.id);t&&(e.element.value=t.value,this.selected=t.value)}e.element.addEventListener("change",t=>{t.preventDefault(),this.selected=t.target.value;for(let t of this.controls)t.element.value=this.selected;window.jplist&&window.jplist.refresh(this.group,e)})}getSortOptions(){let t=this.options.find(t=>t.element.value===this.selected);return t?t.getSortOptions():[]}getDeepLink(){let t=this.options.find(t=>t.element.value===this.selected);return this.id?this.id+"="+t.element.value:""}};s(1);var L=class{constructor(t){if(t){if(this.element=t,!this.element)return;this.panels=this.element.querySelectorAll('[data-type="panel"]'),this.element.openedClass=(this.element.getAttribute("data-opened-class")||"jplist-dd-opened").trim();for(let e of this.panels)e.initialContent=e.innerHTML,e.element=t;this.contents=this.element.querySelectorAll('[data-type="content"]'),this.handlePanelsClick()}}handlePanelsClick(){if(this.panels&&!(this.panels.length<=0)){for(let t of this.panels)t.addEventListener("click",e=>{let s=!1;for(let e of this.contents)e.classList.toggle(t.element.openedClass),e.classList.contains(t.element.openedClass)&&(s=!0);s?(t.classList.add(t.element.openedClass),t.element.classList.add(t.element.openedClass)):(t.classList.remove(t.element.openedClass),t.element.classList.remove(t.element.openedClass))});document.addEventListener("click",t=>{this.element.contains(t.target)||this.close()})}}setPanelsContent(t){for(let e of this.panels)e.innerHTML=t}restorePanelsContent(){for(let t of this.panels)t.initialContent&&(t.innerHTML=t.initialContent)}close(){for(let t of this.contents)t.classList.remove(this.panels[0].element.openedClass);for(let t of this.panels)t.classList.remove(t.element.openedClass),t.element.classList.remove(t.element.openedClass)}};class A extends x{constructor(t,e,s=[],i=null){super(t,e,s,i),this.group=t,this.name=e,this.selected=null,this.id=""}addControl(t){const e=super.addControl(t);e.dropdown=new L(t.element),e.buttons=[];let s=e.element.querySelectorAll("[data-path]");for(let t of s){t.setAttribute("data-name",this.name),t.setAttribute("data-group",this.group),t.setAttribute("data-jump",e.jump);let s=new b(t);e.buttons.push(s),s.element.addEventListener("click",t=>{t.preventDefault(),this.selected=s,this.setSelectedButton(e);for(let t of this.controls)t.dropdown&&t.dropdown.close();window.jplist&&window.jplist.refresh(this.group,s)})}if(this.selected=A.getSelectedButton(e.buttons),this.setSelectedButton(e),e.id){this.id=e.id;const t=this.deepLinkParams.find(t=>t.key===e.id);if(t){const s=e.buttons.find(e=>{const s=e.element.getAttribute("data-value");return t.value===s?e:null});s&&(this.selected=s,this.setSelectedButton(e))}}}getSortOptions(){return this.selected?this.selected.getSortOptions():[]}getDeepLink(){return this.id&&this.selected&&this.id+"="+this.selected.element.getAttribute("data-value")||""}static getSelectedButton(t){if(t.length<=0)return null;for(let e of t)if("true"===e.element.getAttribute("data-selected"))return e;return t[0]}setSelectedButton(t){for(let e of this.controls){if(!e.dropdown)continue;const s=t.buttons.find(t=>this.selected.isEqualTo(t));s&&e.dropdown.setPanelsContent(s.element.textContent)}}}var k=A;var S=class extends a{constructor(t){super(t),t&&(this.itemsPerPage=Number(t.getAttribute("data-items-per-page"))||10,this.currentPage=Number(t.getAttribute("data-current-page"))||0,this.range=Number(t.getAttribute("data-range"))||10,this.disabledClass=(t.getAttribute("data-disabled-class")||"jplist-disabled").trim(),this.selectedClass=(t.getAttribute("data-selected-class")||"jplist-selected").trim())}getPaginationOptions(){return{itemsPerPage:this.itemsPerPage,currentPage:this.currentPage,range:this.range}}};var j=class extends f{getPaginationOptions(){return this.controls.length>0?this.controls[this.controls.length-1].getPaginationOptions():null}setPaginationOptions(t){}addControl(t){if(t.name!==this.name||t.group!==this.group)return null;const e=new S(t.element);return this.controls.push(e),e}};class N extends j{constructor(t,e,s=[],i=null){super(t,e,s,i),this.currentPage=0,this.itemsPerPage=0,this.range=0,this.id=""}addControl(t){const e=super.addControl(t);if(this.currentPage=e.currentPage,this.itemsPerPage=Number(e.itemsPerPage)||0,this.range=e.range,this.restoreFromDeepLink(e),e.pageButtonsHolder=e.element.querySelector('[data-type="pages"]'),e.pageButtonsHolder&&(e.btnTemplate=e.pageButtonsHolder.innerHTML),e.firstButtons=e.element.querySelectorAll('[data-type="first"]'),e.lastButtons=e.element.querySelectorAll('[data-type="last"]'),e.prevButtons=e.element.querySelectorAll('[data-type="prev"]'),e.nextButtons=e.element.querySelectorAll('[data-type="next"]'),N.bindEventHandler(e.firstButtons,"click",this.pageButtonClick.bind(this),e),N.bindEventHandler(e.lastButtons,"click",this.pageButtonClick.bind(this),e),N.bindEventHandler(e.prevButtons,"click",this.pageButtonClick.bind(this),e),N.bindEventHandler(e.nextButtons,"click",this.pageButtonClick.bind(this),e),e.itemsPerPageSelects=Array.from(e.element.querySelectorAll('[data-type="items-per-page"]')),this.updateItemsPerPageSelect(e.itemsPerPageSelects),e.itemsPerPageDD=Array.from(e.element.querySelectorAll('[data-type="items-per-page-dd"]')),this.initCustomDropdowns(e),N.bindEventHandler(e.itemsPerPageSelects,"change",this.selectChange.bind(this),e),e.labels=e.element.querySelectorAll('[data-type="info"]'),e.labels)for(let t of e.labels)t.template=t.innerHTML}updateItemsPerPageSelect(t){for(let e of t){const t=Array.from(e.options).find(t=>t.value===this.itemsPerPage.toString());e.value=t&&Number(this.itemsPerPage)||0}}initCustomDropdowns(t){const e=t.itemsPerPageDD;if(e&&!(e.length<=0)){for(let s of e){s.dropdown=new L(s),s.buttons=Array.from(s.querySelectorAll("[data-value]"));for(let e of s.buttons)e.addEventListener("click",i=>{i.preventDefault(),this.itemsPerPage=Number(e.getAttribute("data-value"))||0,this.setSelectedButton(),s.dropdown.close(),window.jplist&&window.jplist.refresh(this.group,t)})}this.setSelectedButton()}}setSelectedButton(){for(let t of this.controls)if(t.itemsPerPageDD)for(let e of t.itemsPerPageDD){if(!e.buttons)continue;let t=e.buttons.find(t=>(Number(t.getAttribute("data-value"))||0)===this.itemsPerPage);t||(t=e.buttons.find(t=>0===(Number(t.getAttribute("data-value"))||0))),t&&e.dropdown.setPanelsContent(t.textContent)}}getPaginationOptions(){return{itemsPerPage:this.itemsPerPage,currentPage:this.currentPage,range:this.range}}setPaginationOptions(t){if(t){this.currentPage=t.currentPage,this.itemsPerPage=t.itemsPerPage;for(let e of this.controls){if(!e.btnTemplate||!e.pageButtonsHolder)continue;for(;e.pageButtonsHolder.firstChild;)e.pageButtonsHolder.removeChild(e.pageButtonsHolder.firstChild);for(let s=t.rangeStart;s<=t.rangeEnd;s++){const t=document.createElement("div");t.innerHTML=e.btnTemplate.replace(new RegExp("{pageNumber}","g"),s+1).trim();const i=t.firstChild;let r=i.querySelector('[data-type="page"]');r||(r=i),r.setAttribute("data-page",s.toString()),s===this.currentPage&&(r.classList.add(e.selectedClass),r.setAttribute("data-selected","true")),r.addEventListener("click",t=>{this.pageButtonClick(t,r,e)}),e.pageButtonsHolder.appendChild(i)}N.setPageAttr(e.firstButtons,0,0!==this.currentPage,e.disabledClass),N.setPageAttr(e.lastButtons,t.pagesNumber-1,this.currentPage!==t.pagesNumber-1,e.disabledClass),N.setPageAttr(e.prevButtons,t.prevPage,0!==this.currentPage,e.disabledClass),N.setPageAttr(e.nextButtons,t.nextPage,this.currentPage!==t.pagesNumber-1,e.disabledClass);const s=[{key:"{pageNumber}",value:t.currentPage+1},{key:"{pagesNumber}",value:t.pagesNumber},{key:"{startItem}",value:t.start+1},{key:"{endItem}",value:t.end},{key:"{itemsNumber}",value:t.itemsNumber}];if(e.labels)for(let t of e.labels){if(!t.template)continue;let e=t.template;for(let t of s)e=e.replace(new RegExp(t.key,"g"),t.value);t.innerHTML=e}const i=Array.from(e.element.classList).filter(t=>t.startsWith("jplist-pages-number-")||t.startsWith("jplist-items-number-"));for(let t of i)e.element.classList.remove(t);e.element.classList.add("jplist-pages-number-"+t.pagesNumber),e.element.classList.add("jplist-items-number-"+t.itemsNumber)}}}pageButtonClick(t,e,s){t&&t.preventDefault();const i=e?e.getAttribute("data-page"):t.target.getAttribute("data-page");this.currentPage=Number(i)||0,window.jplist&&window.jplist.refresh(this.group,s)}selectChange(t,e,s){t.preventDefault();const i=Number(t.target.value);if(!isNaN(i)){this.itemsPerPage=i;for(let t of this.controls)this.updateItemsPerPageSelect(t.itemsPerPageSelects)}window.jplist&&window.jplist.refresh(this.group,s)}restoreFromDeepLink(t){if(t.id){this.id=t.id;const e=this.deepLinkParams.find(e=>e.key===t.id);if(e){const t=e.value.split("-");if(2!==t.length)return;const s=Number(t[0]),i=Number(t[1]);if(isNaN(s)||isNaN(i))return;this.currentPage=s,this.itemsPerPage=i}}}getDeepLink(){return this.id?this.id+"="+this.currentPage+"-"+this.itemsPerPage:""}static setPageAttr(t,e,s,i){if(t)for(let r of t)r.setAttribute("data-page",e),s?r.classList.remove(i):r.classList.add(i)}static bindEventHandler(t,e,s,i){if(t)for(let r of t)r.addEventListener(e,t=>{s(t,r,i)})}}var F=N;var O=class extends a{constructor(t){super(t),t&&(this.path=(t.getAttribute("data-path")||"").trim(),this.initialText=t.getAttribute("data-text")||t.value||"",this._text=(t.getAttribute("data-text")||t.value||"").trim(),this.mode=(t.getAttribute("data-mode")||"contains").trim(),this.regex=t.getAttribute("data-regex")||"",this.or=t.getAttribute("data-or")||null)}set text(t){this.initialText=t||"",this._text=(t||"").trim()}get text(){return this._text}getTextFilterOptions(){return{path:this.path,text:this.text,mode:this.mode,ignoreRegex:this.regex,or:this.or}}isEqualTo(t,e=!0){let s=this.path===t.path&&this.mode===t.mode&&this.regex===t.regex;return e&&(s=s&&this.text===t.text),s}};var D=class extends f{getTextFilterOptions(){let t=[];for(let e of this.controls)t=t.concat(e.getTextFilterOptions());return t}addControl(t){if(t.name!==this.name||t.group!==this.group)return null;const e=new O(t.element);return this.controls.push(e),e}getDeepLink(){const t=this.controls.map(t=>t.id&&""!==t.text.trim()?t.id+"="+t.text.trim():"").filter(t=>""!==t);return Array.from(new Set(t)).join("&")}};var E=class extends D{constructor(t,e,s=[],i=null){super(t,e,s,i),this.group=t,this.name=e}addControl(t){const e=super.addControl(t);if(e.id){const t=this.deepLinkParams.find(t=>t.key===e.id);t&&(e.text=t.value,e.element.value=t.value)}if(e.element.addEventListener("keyup",t=>{t.preventDefault(),e.text=t.target.value,this.textChanged(e)}),e.clearButtonID=(e.element.getAttribute("data-clear-btn-id")||"").trim(),e.clearButtonID){const t=document.getElementById(e.clearButtonID);t&&t.addEventListener("click",t=>{t.preventDefault(),e.text="",this.textChanged(e)})}}textChanged(t){this.controls.forEach(e=>{e.isEqualTo(t,!1)&&(e.element.value=t.initialText,e.text=t.initialText)}),window.jplist&&window.jplist.refresh(this.group,t)}};var T=t=>class extends t{constructor(t,e,s=[],i=null){super(t,e,s,i),this.group=t,this.name=e,this.checkboxes=[]}addControl(t){const e=super.addControl(t);if(e.selected=e.element.checked,e.id){const t=this.deepLinkParams.find(t=>t.key===e.id);t&&(e.selected="1"===t.value)}this.checkboxes.push(e),this.handleCheckboxes(),e.element.addEventListener("change",t=>{t.preventDefault(),e.selected=!e.selected,this.checkboxes.forEach(t=>{t.isEqualTo(e)&&(t.selected=e.selected)}),this.handleCheckboxes(),window.jplist&&window.jplist.refresh(this.group,e)})}handleCheckboxes(){for(let t of this.checkboxes)t.selected?t.element.classList.add("jplist-selected"):t.element.classList.remove("jplist-selected"),t.element.checked=t.selected}getDeepLink(){const t=this.checkboxes.map(t=>t.id?t.selected?t.id+"=1":t.id+"=0":"").filter(t=>""!==t);return Array.from(new Set(t)).join("&")}};class M extends(T(D)){getTextFilterOptions(){let t=[];for(let e of this.checkboxes)e.selected&&(t=t.concat(e.getTextFilterOptions()));return t}}var q=M;var I=t=>class extends t{constructor(t,e,s=[],i=null){super(t,e,s,i),this.group=t,this.name=e,this.radios=[]}addControl(t){const e=super.addControl(t);if(e.selected=e.element.checked,e.id){const t=this.deepLinkParams.find(t=>t.key===e.id);t&&(e.selected="1"===t.value)}this.radios.push(e),this.handleRadios(),e.element.addEventListener("change",t=>{t.preventDefault();for(let t of this.radios)t.selected=!1;e.selected=!0,this.handleRadios(),window.jplist&&window.jplist.refresh(this.group,e)})}getLastSelectedRadio(){let t=null;for(let e of this.radios)e.selected&&(t=e);return t}handleRadios(){if(this.radios.length>0){let t=this.getLastSelectedRadio();for(let t of this.radios)t.selected=!1,t.element.classList.remove("jplist-selected");t&&this.radios.forEach(e=>{e.isEqualTo(t)&&(e.selected=!0,e.element.checked=!0,e.element.classList.add("jplist-selected"))})}}getDeepLink(){const t=this.radios.map(t=>t.id&&t.selected?t.id+"=1":"").filter(t=>""!==t);return Array.from(new Set(t)).join("&")}};class R extends(I(D)){getTextFilterOptions(){let t=[],e=this.getLastSelectedRadio();return e&&(t=t.concat(e.getTextFilterOptions())),t}}var B=R;var H=t=>class extends t{constructor(t,e,s=[],i=null){super(t,e,s,i),this.group=t,this.name=e,this.checkboxes=[],this.radios=[]}addControl(t){const e=super.addControl(t);if(e.selected="true"===e.element.getAttribute("data-selected"),e.mode=e.element.getAttribute("data-mode")||"radio",e.id){const t=this.deepLinkParams.find(t=>t.key===e.id);t&&(e.selected="1"===t.value)}"radio"===e.mode&&(this.radios.push(e),this.handleRadios()),"checkbox"===e.mode&&(this.checkboxes.push(e),this.handleCheckboxes()),e.element.addEventListener("click",t=>{if(t.preventDefault(),"checkbox"===e.mode&&(e.selected=!e.selected,this.checkboxes.forEach(t=>{t.isEqualTo(e)&&(t.selected=e.selected)}),this.handleCheckboxes()),"radio"===e.mode){for(let t of this.radios)t.selected=!1;e.selected=!0,this.handleRadios()}window.jplist&&window.jplist.refresh(this.group,e)})}handleCheckboxes(){for(let t of this.checkboxes)t.selected?t.element.classList.add("jplist-selected"):t.element.classList.remove("jplist-selected"),t.element.checked=t.selected}getLastSelectedRadio(){let t=null;for(let e of this.radios)e.selected&&(t=e);return t}handleRadios(){if(this.radios.length>0){let t=this.getLastSelectedRadio();for(let t of this.radios)t.selected=!1,t.element.classList.remove("jplist-selected");t&&this.radios.forEach(e=>{e.isEqualTo(t)&&(e.selected=!0,e.element.checked=!0,e.element.classList.add("jplist-selected"))})}}getDeepLink(){const t=this.checkboxes.map(t=>t.id?t.selected?t.id+"=1":t.id+"=0":"").filter(t=>""!==t),e=this.radios.map(t=>t.id&&t.selected?t.id+"=1":"").filter(t=>""!==t),s=t.concat(e);return Array.from(new Set(s)).join("&")}};class V extends(H(D)){getTextFilterOptions(){let t=[],e=this.getLastSelectedRadio();e&&(t=t.concat(e.getTextFilterOptions()));for(let e of this.checkboxes)e.selected&&(t=t.concat(e.getTextFilterOptions()));return t}}var W=V;var G=class extends a{constructor(t){super(t),t&&(this.path=(t.getAttribute("data-path")||"").trim(),this.isInverted="true"===(t.getAttribute("data-inverted")||"").toLowerCase().trim(),this.or=t.getAttribute("data-or")||null)}getPathFilterOptions(){return{path:this.path,isInverted:this.isInverted,or:this.or}}isEqualTo(t){return this.path===t.path&&this.isInverted===t.isInverted}};var _=class extends f{addControl(t){if(t.name!==this.name||t.group!==this.group)return null;const e=new G(t.element);return this.controls.push(e),e}getPathFilterOptions(){let t=[];for(let e of this.controls)t=t.concat(e.getPathFilterOptions());return t}};var z=class extends _{constructor(t,e,s=[],i=null){super(t,e,s,i),this.group=t,this.name=e,this.options=[],this.selected="",this.id=""}addControl(t){const e=super.addControl(t);let s=e.element.querySelectorAll("option");for(let t of s)t.setAttribute("data-name",this.name),t.setAttribute("data-group",this.group),this.options.find(e=>e.element.value===t.value)||this.options.push(new G(t));if(this.selected=e.element.value,e.id){this.id=e.id;const t=this.deepLinkParams.find(t=>t.key===e.id);t&&(e.element.value=t.value,this.selected=t.value)}e.element.addEventListener("change",t=>{t.preventDefault(),this.selected=t.target.value;for(let t of this.controls)t.element.value=this.selected;window.jplist&&window.jplist.refresh(this.group,e)})}getPathFilterOptions(){let t=this.options.find(t=>t.element.value===this.selected);return t?[t.getPathFilterOptions()]:[]}getDeepLink(){let t=this.options.find(t=>t.element.value===this.selected);return this.id?this.id+"="+t.element.value:""}};class U extends(T(_)){getPathFilterOptions(){let t=[];for(let e of this.checkboxes)e.selected&&(t=t.concat(e.getPathFilterOptions()));return t}}var K=U;class $ extends(I(_)){getPathFilterOptions(){let t=[],e=this.getLastSelectedRadio();return e&&(t=t.concat(e.getPathFilterOptions())),t}}var Y=$;class X extends(H(_)){getPathFilterOptions(){let t=[],e=this.getLastSelectedRadio();e&&(t=t.concat(e.getPathFilterOptions()));for(let e of this.checkboxes)e.selected&&(t=t.concat(e.getPathFilterOptions()));return t}}var Z=X;class J extends _{constructor(t,e,s=[],i=null){super(t,e,s,i),this.group=t,this.name=e,this.selected="",this.id=""}addControl(t){const e=super.addControl(t);e.dropdown=new L(t.element),e.buttons=[];let s=e.element.querySelectorAll("[data-path]");for(let t of s){t.setAttribute("data-name",this.name),t.setAttribute("data-group",this.group),t.setAttribute("data-jump",e.jump);let s=new G(t);e.buttons.push(s),s.element.addEventListener("click",t=>{t.preventDefault(),this.selected=s,this.setSelectedButton(e),window.jplist&&window.jplist.refresh(this.group,s)})}if(this.selected=J.getSelectedButton(e.buttons),this.setSelectedButton(e),e.id){this.id=e.id;const t=this.deepLinkParams.find(t=>t.key===e.id);if(t){const s=e.buttons.find(e=>{const s=e.element.getAttribute("data-value");return t.value===s?e:null});s&&(this.selected=s,this.setSelectedButton(e))}}}getPathFilterOptions(){return this.selected?[this.selected.getPathFilterOptions()]:[]}getDeepLink(){return this.id&&this.selected&&this.id+"="+this.selected.element.getAttribute("data-value")||""}static getSelectedButton(t){if(t.length<=0)return null;for(let e of t)if("true"===e.element.getAttribute("data-selected"))return e;return t[0]}setSelectedButton(t){for(let e of this.controls){if(!e.dropdown)continue;const s=t.buttons.find(t=>this.selected.isEqualTo(t));s&&e.dropdown.setPanelsContent(s.element.textContent),e.dropdown.close()}}}var Q=J;var tt=class extends a{constructor(t){if(super(t),t){this.path=(t.getAttribute("data-path")||"").trim();const e=t.getAttribute("data-from");this.from=null===e?-1/0:Number(e),isNaN(this.from)&&(this.from=-1/0);const s=t.getAttribute("data-to");this.to=null===s?1/0:Number(s),isNaN(this.to)&&(this.to=1/0);const i=t.getAttribute("data-min");this.min=null===i?this.from:Number(i),isNaN(this.min)&&(this.min=this.from);const r=t.getAttribute("data-max");this.max=null===r?this.to:Number(r),isNaN(this.max)&&(this.max=this.to),this.or=t.getAttribute("data-or")||null}}getRangeFilterOptions(){return{path:this.path,min:this.min,from:this.from,to:this.to,max:this.max,or:this.or}}isEqualTo(t){return this.path===t.path&&this.from===t.from&&this.to===t.to&&this.min===t.min&&this.max===t.max}};var et=class extends f{addControl(t){if(t.name!==this.name||t.group!==this.group)return null;const e=new tt(t.element);return this.controls.push(e),e}getRangeFilterOptions(){let t=[];for(let e of this.controls)t=t.concat(e.getRangeFilterOptions());return t}};class st extends(H(et)){getRangeFilterOptions(){let t=[],e=this.getLastSelectedRadio();e&&(t=t.concat(e.getRangeFilterOptions()));for(let e of this.checkboxes)e.selected&&(t=t.concat(e.getRangeFilterOptions()));return t}}var it=st;s(6);class rt{constructor(t,e=!1,s=0,i=0,r=0,n=0,a=((t,e)=>{})){if(t){if(this.element=t,this.element.classList.add("jplist-slider"),!this.element)return;this.isVertical=e,this.callback=a,this.min=s,this.max=n,e&&this.element.classList.add("jplist-slider-vertical"),this.handler1=document.createElement("span"),this.handler1.classList.add("jplist-slider-holder-1"),this.element.appendChild(this.handler1),this.range=document.createElement("span"),this.range.classList.add("jplist-slider-range"),this.element.appendChild(this.range),this.handler1.left=0,this.handler1.top=0,this.handler2=document.createElement("span"),this.handler2.classList.add("jplist-slider-holder-2"),this.element.appendChild(this.handler2),this.handler2.left=0,this.handler2.top=0,this.dragging=null,this.handler1.addEventListener("mousedown",this.start.bind(this)),this.handler2.addEventListener("mousedown",this.start.bind(this)),this.handler1.addEventListener("touchstart",this.start.bind(this)),this.handler2.addEventListener("touchstart",this.start.bind(this)),document.addEventListener("mousemove",this.render.bind(this)),document.addEventListener("touchmove",this.render.bind(this)),window.addEventListener("resize",this.resize.bind(this)),document.addEventListener("mouseup",this.stop.bind(this)),document.addEventListener("touchend",this.stop.bind(this)),document.body.addEventListener("mouseleave",this.stop.bind(this)),this.element.addEventListener("mousedown",this.jump.bind(this)),this.setValues(i,r)}}setValues(t,e,s=!0){e<t&&(e=t);const i=this.getInnerValue(t,this.min,this.max),r=this.getInnerValue(e,this.min,this.max);this.update({x:r,y:r},this.handler2,s),this.update({x:i,y:i},this.handler1,s)}getPreviewValue(t,e,s){const i=e,r=s;return(t-0)/(this.element.getBoundingClientRect()[this.isVertical?"height":"width"]-0)*(r-i)+i}getInnerValue(t,e,s){return(t-e)/(s-e)*(this.element.getBoundingClientRect()[this.isVertical?"height":"width"]-0)+0}jump(t){t.preventDefault();let e=this.getHandlerPos(t);this.isVertical?this.dragging=Math.abs(e.y-this.handler1.top)<Math.abs(e.y-this.handler2.top)?this.handler1:this.handler2:this.dragging=Math.abs(e.x-this.handler1.left)<Math.abs(e.x-this.handler2.left)?this.handler1:this.handler2,this.render(t)}setZIndex(){const t=window.getComputedStyle&&Number(document.defaultView.getComputedStyle(this.handler1,null).getPropertyValue("z-index"))||200,e=window.getComputedStyle&&Number(document.defaultView.getComputedStyle(this.handler2,null).getPropertyValue("z-index"))||200;if(t===e)this.dragging.style["z-index"]=t+1;else{const s=Math.max(t,e),i=Math.min(t,e);this.handler1.style["z-index"]=i,this.handler2.style["z-index"]=i,this.dragging.style["z-index"]=s}}start(t){t.preventDefault(),t.stopPropagation(),this.dragging=t.target,this.setZIndex(),this.render()}stop(t){this.dragging=null}resize(t){this.handler1&&this.handler2&&this.setValues(this.handler1.value,this.handler2.value)}render(t){t&&this.dragging&&this.update(this.getHandlerPos(t),this.dragging)}update(t,e,s=!0){if(e){const i=this.element.getBoundingClientRect(),r=this.isVertical?"height":"width",n=this.isVertical?"y":"x",a=this.isVertical?"top":"left";t[n]<0&&(t[n]=0),t[n]>i[r]&&(t[n]=i[r]),e===this.handler1&&t[n]>=this.handler2[a]&&(t[n]=this.handler2[a]),e===this.handler2&&t[n]<=this.handler1[a]&&(t[n]=this.handler1[a]),e[a]=t[n],e.value=this.getPreviewValue(t[n],this.min,this.max),e.style[a]=t[n]+"px",this.range.style[a]=this.handler1[a]+"px";const o=this.handler2[a]-this.handler1[a];this.range.style[r]=(o>=0?o:0)+"px",this.callback&&s&&this.callback(this.handler1.value,this.handler2.value)}}static sub(t,e){return{x:t.x-e.x,y:t.y-e.y}}getHandlerPos(t){const e=this.element.getBoundingClientRect(),s={x:t.touches&&t.touches.length>0?t.touches[0].pageX:t.clientX,y:t.touches&&t.touches.length>0?t.touches[0].pageY:t.clientY},i={x:e.left,y:e.top};return rt.sub(s,i)}}var nt=rt;var at=class extends et{constructor(t,e,s=[],i=null){super(t,e,s,i),this.group=t,this.name=e}addControl(t){const e=super.addControl(t),s=t.element.querySelector('[data-type="slider"]');if(e.val1Elements=t.element.querySelectorAll('[data-type="value-1"]'),e.val2Elements=t.element.querySelectorAll('[data-type="value-2"]'),e.minElements=t.element.querySelectorAll('[data-type="min"]'),e.maxElements=t.element.querySelectorAll('[data-type="max"]'),!s)return;const i=t.element.getAttribute("data-orientation")||"horizontal";for(let t of e.minElements)t.textContent=e.min;for(let t of e.maxElements)t.textContent=e.max;if(e.id){const t=this.deepLinkParams.find(t=>t.key===e.id);if(t&&t.value){const s=t.value.split("_");2===s.length&&(e.from=Number(s[0])||0,e.to=Number(s[1])||0)}}e.slider=new nt(s,"vertical"===i,e.min,e.from,e.to,e.max,(t,s)=>{for(let s of e.val1Elements)s.textContent=Math.round(t);for(let t of e.val2Elements)t.textContent=Math.round(s);for(let e of this.controls)e.slider&&e.slider.setValues(t,s,!1);window.jplist&&window.jplist.refresh(this.group,e)})}getRangeFilterOptions(){let t=[];for(let e of this.controls){if(!e.slider||!e.slider.handler1||!e.slider.handler2)continue;const s=e.getRangeFilterOptions();s.from=e.slider.handler1.value,s.to=e.slider.handler2.value,t=t.concat(s)}return t}getDeepLink(){const t=this.controls.map(t=>t.id&&t.slider&&t.slider.handler1&&t.slider.handler2?t.id+"="+t.slider.handler1.value+"_"+t.slider.handler2.value:"").filter(t=>""!==t);return Array.from(new Set(t)).join("&")}};var ot=class extends a{constructor(t){super(t),t&&(this.latPath=(t.getAttribute("data-lat-path")||"").trim(),this.lngPath=(t.getAttribute("data-lng-path")||"").trim(),this.latAttr=(t.getAttribute("data-lat-attr")||"data-lat").trim(),this.lngAttr=(t.getAttribute("data-lng-attr")||"data-lng").trim(),this.maxDistance=t.getAttribute("data-max-distance")?Number(t.getAttribute("data-max-distance")):null,this.or=t.getAttribute("data-or")||null,this.distanceDisplayPath=(t.getAttribute("data-distance-display")||"").trim(),this.userLat=null,this.userLng=null,this.userAddress="")}getDistanceFilterOptions(){return{latPath:this.latPath,lngPath:this.lngPath,latAttr:this.latAttr,lngAttr:this.lngAttr,maxDistance:this.maxDistance,userLat:this.userLat,userLng:this.userLng,userAddress:this.userAddress,distanceDisplayPath:this.distanceDisplayPath,or:this.or}}isEqualTo(t){return this.latPath===t.latPath&&this.lngPath===t.lngPath&&this.latAttr===t.latAttr&&this.lngAttr===t.lngAttr&&this.maxDistance===t.maxDistance&&this.userLat===t.userLat&&this.userLng===t.userLng}};var lt=class extends f{addControl(t){if(t.name!==this.name||t.group!==this.group)return null;const e=new ot(t.element);return this.controls.push(e),e}getDistanceFilterOptions(){let t=[];for(let e of this.controls)e.userLat&&e.userLng&&t.push({latPath:e.latPath,lngPath:e.lngPath,latAttr:e.latAttr,lngAttr:e.lngAttr,maxDistance:e.maxDistance,userLat:e.userLat,userLng:e.userLng,distanceDisplayPath:e.distanceDisplayPath,or:e.or});return t}};var dt=class extends lt{constructor(t,e,s=[],i=null){super(t,e,s,i),this.geocodeApiKey="",this.debounceTimeout=null,this.debounceDelay=500}addControl(t){if(t.name!==this.name||t.group!==this.group)return null;const e=new ot(t.element);return this.geocodeApiKey=t.element.getAttribute("data-api-key")||"",e.addressInput=t.element.querySelector('[data-type="address-input"]'),e.loadingIndicator=t.element.querySelector(".loading-indicator"),e.addressInput&&e.addressInput.addEventListener("input",this.onAddressInputChange.bind(this,e)),this.controls.push(e),e}onAddressInputChange(t,e){const s=e.target.value.trim();if(this.debounceTimeout&&clearTimeout(this.debounceTimeout),s)this.debounceTimeout=setTimeout(()=>{this.geocodeAddress(s,t)},this.debounceDelay);else{for(let t of this.controls)t.userLat=null,t.userLng=null,t.userAddress="";this.hideDistanceDisplayElements(),window.jplist&&window.jplist.refresh(this.group,t)}}hideDistanceDisplayElements(){for(let t of this.controls){const e=t.element.getAttribute("data-distance-display");if(e){const t=document.querySelectorAll(`[data-jplist-group="${this.group}"] [data-jplist-item]`);for(let s of t){const t=s.querySelectorAll(e);for(let e of t)e.textContent="",e.style.display="none"}}}}geocodeAddress(t,e){if(!t||!this.geocodeApiKey)return;e.loadingIndicator&&(e.loadingIndicator.style.display="block");const s=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(t)}&key=${this.geocodeApiKey}`;fetch(s).then(t=>t.json()).then(s=>{if(e.loadingIndicator&&(e.loadingIndicator.style.display="none"),"OK"===s.status&&s.results&&s.results.length>0){const i=s.results[0].geometry.location;for(let e of this.controls)e.userLat=i.lat,e.userLng=i.lng,e.userAddress=t;window.jplist&&window.jplist.refresh(this.group,e)}}).catch(()=>{e.loadingIndicator&&(e.loadingIndicator.style.display="none")})}restoreFromDeepLink(t){if(t.id){const e=this.deepLinkParams.find(e=>e.key===t.id);if(e){const s=decodeURIComponent(e.value);t.addressInput&&(t.addressInput.value=s),this.geocodeAddress(s,t)}}}getDistanceFilterOptions(){let t=[];for(let e of this.controls)if(e.userLat&&e.userLng){const s=e.element.getAttribute("data-lat-path"),i=e.element.getAttribute("data-lng-path"),r=e.element.getAttribute("data-lat-attr"),n=e.element.getAttribute("data-lng-attr"),a=e.element.getAttribute("data-distance-display");s&&i&&r&&n&&t.push({latPath:s,lngPath:i,latAttr:r,lngAttr:n,userLat:e.userLat,userLng:e.userLng,distanceDisplayPath:a})}return t}};var ct=class extends f{addControl(t){super.addControl(t),t.element.addEventListener("jplist.state",e=>{if(!e.jplistState)return;const s=Number(e.jplistState.itemsNumber)||0;t.element.style.display=0===s?"":"none"},!1)}};class ht extends f{constructor(t,e,s=[],i=null){super(t,e,s,i),this.group=t,this.name=e,this.classNames=new Set,this.selectedClassName=""}addControl(t){if(super.addControl(t),t.groupClassName=t.element.getAttribute("data-class")||"",t.selected="true"===t.element.getAttribute("data-selected"),t.id){const e=this.deepLinkParams.find(e=>e.key===t.id);e&&(t.selected="1"===e.value)}this.classNames.add(t.groupClassName),t.element.addEventListener("click",e=>{e.preventDefault(),this.handleSelectedControls(t.groupClassName),this.handleClasses(),window.jplist&&window.jplist.refresh(this.group,t)},!1),this.handleClasses()}handleClasses(){const t=document.querySelectorAll('[data-jplist-group="'+this.group+'"]');this.resetAllGroups(t);let e=this.getLatestSelectedControl();e&&(this.handleSelectedControls(e.groupClassName),ht.addClassToGroups(e.groupClassName,t))}getLatestSelectedControl(){let t=null;for(let e of this.controls)e.selected&&(t=e);return!t&&this.controls.length>0&&(t=this.controls[0]),t}resetAllGroups(t){for(let e of t)for(let t of this.classNames)e.classList.remove(t)}handleSelectedControls(t){for(let e of this.controls)e.groupClassName===t?(e.selected=!0,e.element.classList.add("jplist-selected")):(e.selected=!1,e.element.classList.remove("jplist-selected"))}static addClassToGroups(t,e){for(let s of e)s.classList.add(t)}getDeepLink(){const t=this.controls.map(t=>t.id?t.selected?t.id+"=1":t.id+"=0":"").filter(t=>""!==t);return Array.from(new Set(t)).join("&")}}var ut=ht;var pt=class extends f{addControl(t){super.addControl(t),t.element.addEventListener("click",e=>{e.preventDefault(),window.jplist&&window.jplist.resetControls(this.group,t)},!1)}};class mt extends f{static getDynamicCounterValue(t,e,s){return(s=mt.getFilteredItems(t,e,s)).length}static getStaticCounterValue(t,e,s){let i=0;for(let r of s){let s=r.items;s=mt.getFilteredItems(t,e,s),i+=s.length}return i}static getFilteredItems(t,e,s){switch(e){case"text":s=u.textFilter(s,t.text,t.path,t.mode,t.regex);break;case"path":s=u.pathFilter(s,t.path,t.isInverted);break;case"range":s=u.rangeFilter(s,t.path,t.from,t.to,t.min,t.max)}return s}render(t){for(let e of this.controls)e.element.innerHTML=e.format.replace("{count}",t)}addControl(t){super.addControl(t),t.filterType=t.element.getAttribute("data-filter-type")||"path",t.format=t.element.getAttribute("data-format")||"{count}",t.mode=t.element.getAttribute("data-mode")||"dynamic";let e=null;switch(t.filterType){case"text":e=new O(t.element);break;case"path":e=new G(t.element);break;case"range":e=new tt(t.element)}t.element.addEventListener("jplist.state",s=>{if(!e||!s.jplistState)return;let i=0;if("static"===t.mode&&s.jplistState.groups&&s.jplistState.groups.has(t.group)){const r=s.jplistState.groups.get(t.group);i=mt.getStaticCounterValue(e,t.filterType,r)}"dynamic"===t.mode&&s.jplistState.filtered&&s.jplistState.filtered.length>0&&(i=mt.getDynamicCounterValue(e,t.filterType,s.jplistState.filtered)),this.render(i)},!1)}}var gt=mt;(()=>{if("function"!=typeof window.CustomEvent){const t=(t,e)=>{e=e||{bubbles:!1,cancelable:!1,detail:void 0};var s=document.createEvent("CustomEvent");return s.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),s};t.prototype=window.Event.prototype,window.CustomEvent=t}window.jplist=window.jplist||{},window.jplist.controlTypes=window.jplist.controlTypes||new Map([["hidden-sort",v],["sort-buttons",w],["radio-buttons-sort",y],["checkbox-sort",C],["select-sort",P],["dropdown-sort",k],["pagination",F],["textbox-filter",E],["checkbox-text-filter",q],["radio-buttons-text-filter",B],["buttons-text-filter",W],["select-filter",z],["dropdown-filter",Q],["checkbox-path-filter",K],["radio-buttons-path-filter",Y],["buttons-path-filter",Z],["buttons-range-filter",it],["slider-range-filter",at],["address-distance-filter",dt],["no-results",ct],["dropdown",L],["layout",ut],["reset",pt],["counter",gt]]);let t=new g;window.jplist.init=t.init.bind(t),window.jplist.refresh=t.refresh.bind(t),window.jplist.resetControls=t.resetControls.bind(t),window.jplist.resetControl=t.resetControl.bind(t),window.jplist.resetContent=t.resetContent.bind(t)})()},function(t,e){},,,,,function(t,e){}]);
//# sourceMappingURL=jplist-es6.min.js.map